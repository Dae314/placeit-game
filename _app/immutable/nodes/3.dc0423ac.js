import{G as Ae,s as fe,f as A,g as E,h as N,d as y,j as D,k as $,i as P,H as re,N as Ee,l as L,m as F,C as V,D as k,e as ge,a as K,c as Q,K as se,v as ue,n as ce,J as Pe,o as Me,M as j}from"../chunks/scheduler.2a48a4a4.js";import{t as ne,a as ae,S as de,i as he,g as Re,c as xe,b as Ie,d as Ne,m as Ce,e as Ve}from"../chunks/index.c5a2a3c6.js";import{A as H,s as We}from"../chunks/AppData.c31825e0.js";function te(a){return(a==null?void 0:a.length)!==void 0?a:Array.from(a)}function Ge(a,l){ne(a,1,1,()=>{l.delete(a.key)})}function He(a,l,s,e,i,n,t,c,u,m,g,p){let v=a.length,w=n.length,b=v;const B={};for(;b--;)B[a[b].key]=b;const M=[],U=new Map,x=new Map,q=[];for(b=w;b--;){const r=p(i,n,b),_=s(r);let o=t.get(_);o?e&&q.push(()=>o.p(r,l)):(o=m(_,r),o.c()),U.set(_,M[b]=o),_ in B&&x.set(_,Math.abs(b-B[_]))}const z=new Set,O=new Set;function h(r){ae(r,1),r.m(c,g),t.set(r.key,r),g=r.first,w--}for(;v&&w;){const r=M[w-1],_=a[v-1],o=r.key,f=_.key;r===_?(g=r.first,v--,w--):U.has(f)?!t.has(o)||z.has(o)?h(r):O.has(f)?v--:x.get(o)>x.get(f)?(O.add(o),h(r)):(z.add(f),v--):(u(_,t),v--)}for(;v--;){const r=a[v];U.has(r.key)||u(r,t)}for(;w;)h(M[w-1]);return Ae(q),M}function be(a,l,s){const e=a.slice();return e[4]=l[s],e}function ye(a){let l,s=a[4]+"",e;return{c(){l=A("div"),e=L(s),this.h()},l(i){l=E(i,"DIV",{class:!0});var n=N(l);e=F(n,s),n.forEach(y),this.h()},h(){D(l,"class","digit svelte-tmlpoc"),V(l,"active",a[0]==="x"||a[4]===a[0])},m(i,n){P(i,l,n),k(l,e)},p(i,n){n&5&&V(l,"active",i[0]==="x"||i[4]===i[0])},d(i){i&&y(l)}}}function Le(a){let l,s=te(a[2]),e=[];for(let i=0;i<s.length;i+=1)e[i]=ye(be(a,s,i));return{c(){l=A("div");for(let i=0;i<e.length;i+=1)e[i].c();this.h()},l(i){l=E(i,"DIV",{class:!0,style:!0});var n=N(l);for(let t=0;t<e.length;t+=1)e[t].l(n);n.forEach(y),this.h()},h(){D(l,"class","container svelte-tmlpoc"),$(l,"--line-height",a[1]+"px"),$(l,"--offset",a[3](a[0])+"px")},m(i,n){P(i,l,n);for(let t=0;t<e.length;t+=1)e[t]&&e[t].m(l,null)},p(i,[n]){if(n&5){s=te(i[2]);let t;for(t=0;t<s.length;t+=1){const c=be(i,s,t);e[t]?e[t].p(c,n):(e[t]=ye(c),e[t].c(),e[t].m(l,null))}for(;t<e.length;t+=1)e[t].d(1);e.length=s.length}n&2&&$(l,"--line-height",i[1]+"px"),n&1&&$(l,"--offset",i[3](i[0])+"px")},i:re,o:re,d(i){i&&y(l),Ee(e,i)}}}function Fe(a,l,s){let{number:e}=l,{lineHeight:i=120}=l;const n=["x",0,1,2,3,4,5,6,7,8,9];function t(c){return c==="x"?0:-(c+1)*i}return a.$$set=c=>{"number"in c&&s(0,e=c.number),"lineHeight"in c&&s(1,i=c.lineHeight)},[e,i,n,t]}class Ue extends de{constructor(l){super(),he(this,l,Fe,Le,fe,{number:0,lineHeight:1})}}function ke(a,l,s){const e=a.slice();return e[2]=l[s],e[4]=s,e}function we(a,l){let s,e,i;return e=new Ue({props:{number:l[2]}}),{key:a,first:null,c(){s=ge(),Ie(e.$$.fragment),this.h()},l(n){s=ge(),Ne(e.$$.fragment,n),this.h()},h(){this.first=s},m(n,t){P(n,s,t),Ce(e,n,t),i=!0},p(n,t){l=n;const c={};t&1&&(c.number=l[2]),e.$set(c)},i(n){i||(ae(e.$$.fragment,n),i=!0)},o(n){ne(e.$$.fragment,n),i=!1},d(n){n&&y(s),Ve(e,n)}}}function Ye(a){let l,s,e=[],i=new Map,n,t=te(a[0]);const c=u=>u[0].length-u[4];for(let u=0;u<t.length;u+=1){let m=ke(a,t,u),g=c(m);i.set(g,e[u]=we(g,m))}return{c(){l=A("div"),s=A("div");for(let u=0;u<e.length;u+=1)e[u].c();this.h()},l(u){l=E(u,"DIV",{class:!0});var m=N(l);s=E(m,"DIV",{class:!0});var g=N(s);for(let p=0;p<e.length;p+=1)e[p].l(g);g.forEach(y),m.forEach(y),this.h()},h(){D(s,"class","digits svelte-157obfn"),D(l,"class","container svelte-157obfn")},m(u,m){P(u,l,m),k(l,s);for(let g=0;g<e.length;g+=1)e[g]&&e[g].m(s,null);n=!0},p(u,[m]){m&1&&(t=te(u[0]),Re(),e=He(e,m,c,1,u,t,i,s,Ge,we,null,ke),xe())},i(u){if(!n){for(let m=0;m<t.length;m+=1)ae(e[m]);n=!0}},o(u){for(let m=0;m<e.length;m+=1)ne(e[m]);n=!1},d(u){u&&y(l);for(let m=0;m<e.length;m+=1)e[m].d()}}}function je(a,l,s){let e,{value:i=0}=l;return a.$$set=n=>{"value"in n&&s(1,i=n.value)},a.$$.update=()=>{a.$$.dirty&2&&s(0,e=i.toString().padStart(3,"x").split("").map(n=>n==="x"?n:Number(n)))},[e,i]}class qe extends de{constructor(l){super(),he(this,l,je,Ye,fe,{value:1})}}function Se(a,l,s){const e=a.slice();return e[19]=l[s],e[21]=s,e}function ze(a){let l,s=a[21]+1+"",e;return{c(){l=A("span"),e=L(s),this.h()},l(i){l=E(i,"SPAN",{class:!0});var n=N(l);e=F(n,s),n.forEach(y),this.h()},h(){D(l,"class","unusedBucketText svelte-1sdmbsm")},m(i,n){P(i,l,n),k(l,e)},p:re,d(i){i&&y(l)}}}function Je(a){let l,s=a[19].value+"",e;return{c(){l=A("span"),e=L(s)},l(i){l=E(i,"SPAN",{});var n=N(l);e=F(n,s),n.forEach(y)},m(i,n){P(i,l,n),k(l,e)},p(i,n){n&2&&s!==(s=i[19].value+"")&&ce(e,s)},d(i){i&&y(l)}}}function De(a){let l,s,e,i,n,t,c,u;function m(w,b){return w[19].value?Je:ze}let g=m(a),p=g(a);function v(){return a[10](a[21])}return{c(){l=A("div"),s=A("button"),p.c(),i=K(),n=A("div"),t=K(),this.h()},l(w){l=E(w,"DIV",{class:!0});var b=N(l);s=E(b,"BUTTON",{class:!0,type:!0});var B=N(s);p.l(B),B.forEach(y),i=Q(b),n=E(b,"DIV",{class:!0}),N(n).forEach(y),t=Q(b),b.forEach(y),this.h()},h(){D(s,"class","bucketButton svelte-1sdmbsm"),D(s,"type","button"),s.disabled=e=a[19].disabled,D(n,"class","underline svelte-1sdmbsm"),V(n,"disabled",a[19].disabled),D(l,"class","bucket svelte-1sdmbsm")},m(w,b){P(w,l,b),k(l,s),p.m(s,null),k(l,i),k(l,n),k(l,t),c||(u=ue(s,"click",v),c=!0)},p(w,b){a=w,g===(g=m(a))&&p?p.p(a,b):(p.d(1),p=g(a),p&&(p.c(),p.m(s,null))),b&2&&e!==(e=a[19].disabled)&&(s.disabled=e),b&2&&V(n,"disabled",a[19].disabled)},d(w){w&&y(l),p.d(),c=!1,u()}}}function Ke(a){let l,s,e,i,n,t,c,u,m="GAME OVER",g,p,v,w,b,B,M,U,x,q,z,O,h,r="RETRY",_,o,f="SHARE",S,W,X,me="COPIED TO CLIPBOARD!",R,ie,ve;e=new qe({props:{value:a[0]}});let Z=te(a[1]),I=[];for(let d=0;d<Z.length;d+=1)I[d]=De(Se(a,Z,d));return{c(){l=A("div"),s=A("div"),Ie(e.$$.fragment),i=K(),n=A("div");for(let d=0;d<I.length;d+=1)I[d].c();t=K(),c=A("div"),u=A("span"),u.textContent=m,g=K(),p=A("div"),v=A("p"),w=L("You placed "),b=L(a[5]),B=L(" out of "),M=L(ee),U=L(" tiles in "),x=L(a[6]),q=L("!"),z=K(),O=A("div"),h=A("button"),h.textContent=r,_=K(),o=A("button"),o.textContent=f,S=K(),W=A("div"),X=A("p"),X.textContent=me,this.h()},l(d){l=E(d,"DIV",{class:!0});var T=N(l);s=E(T,"DIV",{class:!0});var G=N(s);Ne(e.$$.fragment,G),G.forEach(y),i=Q(T),n=E(T,"DIV",{class:!0});var C=N(n);for(let oe=0;oe<I.length;oe+=1)I[oe].l(C);C.forEach(y),T.forEach(y),t=Q(d),c=E(d,"DIV",{class:!0,style:!0});var Y=N(c);u=E(Y,"SPAN",{class:!0,"data-svelte-h":!0}),se(u)!=="svelte-1avriz"&&(u.textContent=m),g=Q(Y),p=E(Y,"DIV",{class:!0});var pe=N(p);v=E(pe,"P",{class:!0});var J=N(v);w=F(J,"You placed "),b=F(J,a[5]),B=F(J," out of "),M=F(J,ee),U=F(J," tiles in "),x=F(J,a[6]),q=F(J,"!"),J.forEach(y),pe.forEach(y),z=Q(Y),O=E(Y,"DIV",{class:!0});var le=N(O);h=E(le,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),se(h)!=="svelte-7t9phd"&&(h.textContent=r),_=Q(le),o=E(le,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),se(o)!=="svelte-149veyf"&&(o.textContent=f),le.forEach(y),Y.forEach(y),S=Q(d),W=E(d,"DIV",{class:!0,style:!0});var _e=N(W);X=E(_e,"P",{class:!0,"data-svelte-h":!0}),se(X)!=="svelte-k1nd5u"&&(X.textContent=me),_e.forEach(y),this.h()},h(){D(s,"class","rollArea svelte-1sdmbsm"),D(n,"class","tableArea svelte-1sdmbsm"),D(l,"class","container svelte-1sdmbsm"),D(u,"class","gameOverText svelte-1sdmbsm"),V(u,"textVisible",a[2]),V(u,"dismissTextAnimation",a[3]),D(v,"class","svelte-1sdmbsm"),D(p,"class","statsArea svelte-1sdmbsm"),D(h,"class","playAgainButton svelte-1sdmbsm"),D(h,"type","button"),D(o,"class","shareButton svelte-1sdmbsm"),D(o,"type","button"),D(O,"class","buttonArea svelte-1sdmbsm"),D(c,"class","gameOverOverlay svelte-1sdmbsm"),$(c,"--gameOverAnimationTime",Be+"ms"),V(c,"visible",a[2]),V(c,"dismissAnimation",a[3]),D(X,"class","svelte-1sdmbsm"),D(W,"class","copyConfirm svelte-1sdmbsm"),$(W,"--copyConfirmDelay",Oe+"ms"),V(W,"copyVisible",a[4])},m(d,T){P(d,l,T),k(l,s),Ce(e,s,null),k(l,i),k(l,n);for(let G=0;G<I.length;G+=1)I[G]&&I[G].m(n,null);P(d,t,T),P(d,c,T),k(c,u),k(c,g),k(c,p),k(p,v),k(v,w),k(v,b),k(v,B),k(v,M),k(v,U),k(v,x),k(v,q),k(c,z),k(c,O),k(O,h),k(O,_),k(O,o),P(d,S,T),P(d,W,T),k(W,X),R=!0,ie||(ve=[ue(h,"click",a[7]),ue(o,"click",a[9])],ie=!0)},p(d,[T]){const G={};if(T&1&&(G.value=d[0]),e.$set(G),T&258){Z=te(d[1]);let C;for(C=0;C<Z.length;C+=1){const Y=Se(d,Z,C);I[C]?I[C].p(Y,T):(I[C]=De(Y),I[C].c(),I[C].m(n,null))}for(;C<I.length;C+=1)I[C].d(1);I.length=Z.length}(!R||T&4)&&V(u,"textVisible",d[2]),(!R||T&8)&&V(u,"dismissTextAnimation",d[3]),(!R||T&32)&&ce(b,d[5]),(!R||T&64)&&ce(x,d[6]),(!R||T&4)&&V(c,"visible",d[2]),(!R||T&8)&&V(c,"dismissAnimation",d[3]),(!R||T&16)&&V(W,"copyVisible",d[4])},i(d){R||(ae(e.$$.fragment,d),R=!0)},o(d){ne(e.$$.fragment,d),R=!1},d(d){d&&(y(l),y(t),y(c),y(S),y(W)),Ve(e),Ee(I,d),ie=!1,Ae(ve)}}}const ee=20,Qe=1,Te=999,Xe=1e3,Be=750,Oe=1e3;function Ze(a){let l=Math.floor(a/6e4),s=(a%6e4/1e3).toFixed(0);return`${l}:${s<10?"0":""}${s}`}function $e(a,l,s){let e;Pe(a,H,h=>s(14,e=h));let i,n,t=new Array(ee).fill().map(()=>({disabled:!1,value:null})),c=!1,u=!1,m=!1,g=0,p=new Date,v,w;Me(()=>{s(0,n=Te),setTimeout(()=>b(),100)});function b(){i=[];for(let h=Qe;h<=Te;h++)i.push(h);s(1,t=new Array(ee).fill().map(()=>({disabled:!1,value:null}))),s(3,u=!0),setTimeout(()=>{s(2,c=!1),s(3,u=!1),p=new Date},Be),v={},B()}function B(){const r=i.length,_=Math.floor(Math.random()*(r-0+1))+0,o=i[_];i.splice(_,1),s(0,n=o),U()}function M(h){s(1,t[h].value=n,t),s(1,t[h].disabled=!0,t),B(),x()}function U(){if(t.every(o=>o.value===null))return;const h=t.filter(o=>o.value!==null).map(o=>o.value);let r=NaN;for(const o of h)o<n&&(isNaN(r)||o>r)&&(r=o);let _=NaN;for(const o of h)o>n&&(isNaN(_)||o<_)&&(_=o);if(isNaN(r)&&!isNaN(_)){let o=t.findIndex(f=>f.value===_);for(let f=0;f<o;f++)t[f].value||s(1,t[f].disabled=!1,t);for(let f=o+1;f<t.length;f++)t[f].value||s(1,t[f].disabled=!0,t)}else if(!isNaN(r)&&isNaN(_)){let o=t.findIndex(f=>f.value===r);for(let f=o;f<t.length;f++)t[f].value||s(1,t[f].disabled=!1,t);for(let f=0;f<o;f++)t[f].value||s(1,t[f].disabled=!0,t)}else{let o=t.findIndex(S=>S.value===r),f=t.findIndex(S=>S.value===_);for(let S=0;S<o;S++)t[S].value||s(1,t[S].disabled=!0,t);for(let S=o;S<f;S++)t[S].value||s(1,t[S].disabled=!1,t);for(let S=f;S<t.length;S++)t[S].value||s(1,t[S].disabled=!0,t)}}function x(){let h;if(t.every(r=>r.value!==null)?h="win":t.every(r=>r.disabled===!0)?h="lose":h="continue",h!=="continue"){v=new Date,s(6,w=Ze(v-p)),s(5,g=t.filter(o=>o.value!==null).length);let r=t.reduce((o,f)=>f.value>o.value?f:o),_=t.reduce((o,f)=>f.value<o.value?f:o);j(H,e.playerStats.totalGames++,e),g>e.playerStats.highestScore&&j(H,e.playerStats.highestScore=g,e),r>e.playerStats.highestPlaced&&j(H,e.playerStats.highestPlaced=r,e),_<e.playerStats.lowestPlaced&&j(H,e.playerStats.lowestPlaced=_,e),h==="win"&&(j(H,e.playerStats.wonGames++,e),(e.playerStats.fastestWin===null||v-p<e.playerStats.fastestWin)&&j(H,e.playerStats.fastestWin=v-p,e),(e.playerStats.slowestWin===null||v-p>e.playerStats.slowestWin)&&j(H,e.playerStats.slowestWin=v-p,e),t[0].value>e.playerStats.highestFirstBucket&&j(H,e.playerStats.highestFirstBucket=t[0].value,e),t[ee-1]<e.playerStats.lowestLastBucket&&j(H,e.playerStats.lowestLastBucket=t[ee-1].value,e)),We(),setTimeout(()=>s(2,c=!0),Xe)}}function q(){const h=`I placed ${g} tiles in ${w} on PlaceIt!`,r=z(),o=`${h}

${r}

Play at https://placitgame.net`;navigator.clipboard.writeText(o),s(4,m=!0),setTimeout(()=>s(4,m=!1),Oe)}function z(){let r="";for(const[_,o]of t.entries())o.value===null?r=r+"🟨":r=r+"🟦",(_+1)%5===0&&(r=r+`
`);return r.trim()}return[n,t,c,u,m,g,w,b,M,q,h=>M(h)]}class st extends de{constructor(l){super(),he(this,l,$e,Ke,fe,{})}}export{st as component};
